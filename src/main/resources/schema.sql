CREATE TABLE IF NOT EXISTS users (
  user_id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS requests (
  request_id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  request_description VARCHAR(5000) NOT NULL,
  requestor_id BIGINT NOT NULL REFERENCES users (user_id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS items (
  item_id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  item_name VARCHAR(255) NOT NULL,
  item_description VARCHAR(5000) NOT NULL,
  available BOOLEAN NOT NULL,
  owner_id BIGINT NOT NULL REFERENCES users (user_id) ON DELETE CASCADE,
  request_id BIGINT REFERENCES requests (request_id)
);

CREATE TABLE IF NOT EXISTS bookings (
  booking_id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  booking_start DATETIME NOT NULL,
  booking_end DATETIME NOT NULL,
  booking_status VARCHAR(8) NOT NULL CHECK(booking_status IN ('WAITING', 'APPROVED', 'REJECTED', 'CANCELED')),
  booking_item_id BIGINT NOT NULL REFERENCES items (item_id) ON DELETE CASCADE,
  booker_id BIGINT NOT NULL REFERENCES users (user_id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS comments (
  comment_id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  comment_text text NOT NULL,
  comment_item_id BIGINT NOT NULL REFERENCES items (item_id) ON DELETE CASCADE,
  author_id BIGINT NOT NULL REFERENCES users (user_id) ON DELETE CASCADE,
  comment_date DATETIME NOT NULL
);


	
	
	
	
	
